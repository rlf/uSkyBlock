language: java
sudo: false
branches:
  only:
  - "/^v2.*$/"
env:
  global:
  - secure: k1KHndDZjvcLvT0gMDB88SSmeMzkqEl91XDJ6hrsSkGkXdJMOoHWkB21nwN+4UBwTb2je0nRdR12lr8HK4lhiS0NMuK0KeiLHUaG36b/NJORSFumZKjS3Wjhm55zdRaU5rwBHAhHxkQZ+NkOXqIWvjOReVY4wvC6619TTj5bxr+z/Bm71yr7xUBQtj+g2Pen+hNVWyWwt4J1uDwBJSudXTHk4cRcCQFtSaPoglg0mcufy+dGTRCfXMCg1scSlSF0yAptZxQcDPvCOLx7GNasMQgtAHhCw1xb/FOuZLD3+l/HZB+lZttZNo1zB3RtXImtJIYUyLQbHsU6GXdKGDnveReolaKdWsTLAZDmkr684I+409gveYyReuvCJA449brVhU+GEULK+xxt0SYqLaBcY/R0B6vElR4HsnvnTS6XWpzt2C+6uMEp7wYB9tqkfnDIh9SVhUUsR8/gQYlKVE8f+XFDMEnBNmUmpLu5b54Ng+TVKU8hcxGrTevy+jU/PsIXlGseG+Hk5eFJxx0GRwAV7DK9Mx+JFdiXZWt+mWWzHvcMu+o817hAxFRGicJiJAvqv1e4EbyMyrlViDj9fz+jnI+P62TLIS+6tIZ+OKIXV2XTmJgn9S7/fDCUVn0Gf5wy+VUZI0oRKt9h8IIsEC7glYjkjRX5DE9PqypeLFFM5DA=
notifications:
  email: false
before_install:
- mvn versions:set -Dtravis.buildNumber=${TRAVIS_BUILD_NUMBER} -DnewVersion=${TRAVIS_TAG:1}
script:
- mvn -Dtravis.buildNumber=${TRAVIS_BUILD_NUMBER} -DskipTests=true install
deploy:
  provider: releases
  api-key: "${GITHUB_TOKEN}"
  file:
  - target/uSkyBlock.jar
  - target/uSkyBlock-api.jar
  - target/site/gettext-report.html
  skip_cleanup: true
  on:
    tags: true
    all_branches: true
after_success:
- mvn -nsu deploy -DGITHUB_TOKEN=${GITHUB_TOKEN}
cache:
  directories:
  - "$HOME/.m2"
